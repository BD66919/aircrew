<!DOCTYPE html>
<!-- saved from url=(0053)https://getbootstrap.com/docs/4.1/examples/dashboard/ -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="icon" href="http://www.airchina.com.cn/favicon.ico" />
    <title>机组数据系统</title>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <link href="/aircrew/static/asserts/css/dashboard.css" rel="stylesheet" />
</head>
<style>
    p{
        font-size : 15px;
    }
</style>
<body th:inline="text">
<div class="container-fluid">
    <div class="row">
        <div th:replace="commons/bar::sidebar(activeUri='pilot')"></div>
        <main role="main" class="col-md-2 ml-sm-auto col-lg-11 px-4">
            <div class="table-responsive">
                <table class="table table-striped table-lg">
                    <thead>
                    <tr>
                        <th>姓名</th>
                        <th>员工号</th>
                        <th>航线名称</th>
                        <th>城市三字码</th>
                        <th>任务性质</th>
                        <th>时间</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="pilot:${pilotPageInfo.list}">
                        <td th:text="${pilot.name}">1</td>
                        <td th:text="${pilot.eid}">1</td>
                        <td th:text="${pilot.line}">1</td>
                        <td th:text="${pilot.tcc}">1</td>
                        <td th:text="${pilot.properties}">1</td>
                        <td th:text="${pilot.date}">1</td>
                        <td>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <div style="text-align:left">
                    <a  href="/aircrew/pilot/add.html"  class="btn btn-success"  >添加数据</a>
                    <a  href="/aircrew/pilot/query.html" class="btn btn-success"  >查询数据</a>
                    <button class="btn btn-success" data-toggle="modal" data-target="#coverUp">上传覆盖数据</button>
                    <button class="btn btn-success" data-toggle="modal" data-target="#addUp">上传追加数据</button>
                    <a  href="/aircrew/excelDownloads"  class="btn btn-success"  >下载所有数据</a>
                    <a  href="/aircrew/pilot/pilotcheck/check.html"  class="btn btn-success"  >飞行员飞行及调度路线校验</a>
                </div>
                <div style="text-align: center">
                    <p>当前 <span th:text="${pilotPageInfo.pageNum}"></span> 页,总 <span th:text="${pilotPageInfo.pages}"></span> 页,共 <span th:text="${pilotPageInfo.total}"></span> 条记录</p>
                </div>
                <div style="text-align: center">
                    <a th:href="@{/pilot}" >首页</a>
                    <a th:href="@{/pilot(pageNum=${pilotPageInfo.hasPreviousPage}?${pilotPageInfo.prePage}:1)}" >上一页</a>
                    <a th:href="@{/pilot(pageNum=${pilotPageInfo.hasNextPage}?${pilotPageInfo.nextPage}:${pilotPageInfo.pages})}" >下一页</a>
                    <a th:href="@{/pilot(pageNum=${pilotPageInfo.pages})}" >尾页</a>
                </div>
            </div>
        </main>
    </div>
</div>

<div class="modal fade" id="coverUp" tabindex="-1" role="dialog" aria-labelledby="coverUpLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="coverUpLabel">覆盖性上传数据</h4>
            </div>
            <div class="modal-body"></div>
            <P>将会覆盖当前数据库中的所有数据</P>
                <input type="file" name="coverFileName" id="coverFileName"/>
            <div class="modal-footer">
                <span id="coverStatus" style="color: red"></span>
                <button type="button" class="btn btn-default" data-dismiss="modal">退出</button>
                <input type="submit" value="提交" class="btn btn-success"  id="coverUpSubmit"  >
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="addUp" tabindex="-1" role="dialog" aria-labelledby="addUpLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="addUpLabel">追加性上传数据</h4>
            </div>
            <div class="modal-body"></div>
            <P>追加上传至数据库中</P>
            <input type="file" name="addFileName" id="addFileName"/>
            <div class="modal-footer">
                <span id="addStatus" style="color: red"></span>
                <button type="button" class="btn btn-default" data-dismiss="modal">退出</button>
                <input type="submit" value="提交" class="btn btn-success"  id="addUpSubmit"  >
            </div>
        </div>
    </div>
</div>
</body>
<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

<script>
    $(function() {
        $('#coverUp').modal('hide');
        $('#coverUpSubmit').click(function(){
            var $file1 = $("input[name='coverFileName']").val();//用户文件内容(文件)
            // 判断文件是否为空
            if ($file1 === "") {
                alert("请选择上传的目标文件! ");
                return false;
            }
            var type = "file";
            var formData = new FormData();//这里需要实例化一个FormData来进行文件上传
            formData.append(type,$("#coverFileName")[0].files[0]);
            $.ajax({
                type : "post",
                url : "/aircrew/coverUploadExcel",
                data : formData,
                processData : false,
                contentType : false,
                success : function(data){
                    var msg = data.msg;
                    $("#coverStatus").html(msg);
                }
            });
        })

        $('#addUp').modal('hide');
        $('#addUpSubmit').click(function(){
            var $file2 = $("input[name='addFileName']").val();//用户文件内容(文件)
            // 判断文件是否为空
            if ($file2 === "") {
                alert("请选择上传的目标文件! ");
                return false;
            }
            var type = "file";
            var formData = new FormData();//这里需要实例化一个FormData来进行文件上传
            formData.append(type,$("#addFileName")[0].files[0]);
            $.ajax({
                type : "post",
                url : "/aircrew/addUploadExcel",
                data : formData,
                processData : false,
                contentType : false,
                success : function(data){
                    var msg = data.msg;
                    $("#addStatus").html(msg);
                }
            });
        })
    });
</script>
</html>